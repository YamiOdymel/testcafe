pipeline:  
  firefox:
    image: alpine:latest
    commands:
      - apk --no-cache add nodejs firefox-esr xvfb dbus eudev ttf-freefont fluxbox
      - npm install --production
      - npm install testcafe -g
      - npm cache clean
      - rm -rf /tmp/*
      - chmod +x ./testcafe-docker.sh
      - adduser -D user
      - ./testcafe-docker.sh
  chrome:
    image: ubuntu:latest
    commands:
      - apt-get update
      - apt-get install -y wget nodejs nodejs-legacy npm
      - wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add -
      - echo "deb http://dl.google.com/linux/chrome/deb/ stable main" > /etc/apt/sources.list.d/google.list
      - apt-get update
      - apt-get install -y google-chrome-stable
      - rm -rf /var/lib/apt/lists/*
      - npm install --production
      - npm install testcafe -g
      - chmod +x ./testcafe-docker.sh
      - ./testcafe-docker.sh
